import{r as t,h as s,H as i,g as e}from"./p-0d0438ba.js";import{w as h}from"./p-dcb2b381.js";import{u as n,p as l,b as r}from"./p-0d6b3f5b.js";const o=[];for(let t=0;t<24;t++)o.push({hours:t,minutes:0}),o.push({hours:t,minutes:30});const a=class{constructor(s){t(this,s),this.dataAttributes={},this.isTimeInputSupported=!1,this.uuid=n(),this.dense=!1,this.disabled=!1,this.error=!1,this.floatLabel=!1,this.isFocused=!1,this.isInputDirty=!1,this.componentWillRender=l}onClick(t){t.stopPropagation(),this.menu.style.width=this.pickerWrapper.getBoundingClientRect().width+"px"}onValueChange(){this.updateInputValue()}componentDidLoad(){this.menu.anchorEl=this.pickerWrapper,this.menu.triggerEl=this.menuButton,this.isTimeInputSupported="time"===this.inputElem.type,this.updateInputValue()}onInput(t){this.isTimeInputSupported||(t.stopPropagation(),this.isFocused&&(this.isInputDirty=!0))}onBlur(){if(this.menu&&this.menu.isOpen||(this.isFocused=!1),!this.isTimeInputSupported&&this.isInputDirty){const t=r(this.inputElem.value);if(null===t)return;this.setValue(t),this.updateInputValue()}}onFocus(){this.isFocused=!0,this.error=!1,this.isInputDirty=!1}onClickLabel(){this.inputElem.focus()}onMenuClose(){this.inputElem.contains(document.activeElement)||(this.isFocused=!1)}onMenuOpen(){this.isFocused=!0}setValue({hours:t,minutes:s}){this.disabled||(this.error=!1,this.value=("0"+t).slice(-2)+":"+("0"+s).slice(-2),this.updateInputValue(),this.inputElem.dispatchEvent(new Event("input",{cancelable:!0,bubbles:!0})))}updateInputValue(){if(null!=this.value){if(this.inputElem.value=this.value,!this.isTimeInputSupported){this.inputElem.dispatchEvent(new Event("input",{cancelable:!0,bubbles:!0}));const[t,s]=this.value.split(":").map(Number);this.inputElem.value=this.getLocalizedTimeString({hours:t,minutes:s})}}else this.inputElem.value=""}getLocalizedTimeString({hours:t,minutes:s}){const i=new Date;return i.setHours(t,s),i.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}get labelClassNames(){let t="block";return this.floatLabel?(t+=" absolute mt-0 left-12 px-4",this.dense&&(t+=" dense text-4"),(this.isFocused||this.inputHasText)&&(t+=" floating"),this.isFocused&&(t+=" -ml-1")):t+=" subtitle2 mb-4 pointer-events-none",t}get inputHasText(){return this.value||this.inputElem&&this.inputElem.validity.badInput}get pickerWrapperClass(){let t="picker-wrapper flex items-center relative border rounded-lg";return t+=this.dense?" h-36":" h-48",(this.error||this.isFocused)&&(t+=" border-2"),this.disabled&&(t+=" disabled"),this.isFocused&&(t+=" focused"),t}get inputClass(){let t="absolute inset-0 w-full h-full pl-12 overflow-hidden outline-none appearance-none select-none bg-transparent";return(this.isFocused||this.error)&&(t+=" -ml-1"),!this.floatLabel||this.isFocused||this.inputHasText||(t+=" opacity-0"),t}get menuButtonClass(){let t="menu-button cursor-pointer border-0 absolute flex items-center h-full right-12 space-x-8";return this.disabled&&(t+=" pointer-events-none"),(this.isFocused||this.error)&&(t+=" -mr-1"),t}render(){const t=s("label",{htmlFor:this.inputId||this.uuid,class:this.labelClassNames,onClick:this.onClickLabel.bind(this)},this.label);return s(i,{class:"mx-time-picker block w-152"+(this.error?" error":"")},this.label&&!this.floatLabel&&t,s("div",{ref:t=>this.pickerWrapper=t,class:this.pickerWrapperClass},s("input",Object.assign({"aria-label":this.ariaLabel||this.label,class:this.inputClass,id:this.inputId||this.uuid,name:this.name,onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onInput:this.onInput.bind(this),ref:t=>this.inputElem=t,tabindex:"0",type:"time",disabled:this.disabled,required:!0},this.dataAttributes)),this.label&&this.floatLabel&&t,s("button",{ref:t=>this.menuButton=t,class:this.menuButtonClass,"data-testid":"menu-button",innerHTML:this.error?h:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75ZM2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12Z" fill="currentColor" fill-opacity="0.87" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 6C12.4142 6 12.75 6.33579 12.75 6.75V11.25H17.25C17.6642 11.25 18 11.5858 18 12C18 12.4142 17.6642 12.75 17.25 12.75H12C11.5858 12.75 11.25 12.4142 11.25 12V6.75C11.25 6.33579 11.5858 6 12 6Z" fill="currentColor" fill-opacity="0.87"/>\n</svg>\n',disabled:this.disabled})),this.assistiveText&&s("div",{class:"caption1 mt-4 ml-16"},s("span",{"data-testid":"assistive-text",class:"assistive-text"},this.assistiveText)),s("mx-menu",{ref:t=>this.menu=t,placement:"bottom",offset:[0,1],onMxClose:this.onMenuClose.bind(this),onMxOpen:this.onMenuOpen.bind(this)},o.map((t=>s("mx-menu-item",{onClick:this.setValue.bind(this,t)},this.getLocalizedTimeString(t))))))}get element(){return e(this)}static get watchers(){return{value:["onValueChange"]}}};export{a as mx_time_picker}