import{r as t,h as s,H as e,g as i}from"./p-0d0438ba.js";const h=class{constructor(s){t(this,s),this.hasInstructions=!1,this.hasSuccess=!1,this.hasError=!1,this.acceptImage=!0,this.acceptPdf=!1,this.assetName="image",this.avatar=!1,this.thumbnailSize="cover",this.isUploaded=!1,this.isUploading=!1,this.removeButtonLabel="Remove",this.showButton=!0,this.showIcon=!0,this.showDropzoneText=!0,this.uploadButtonLabel="Upload",this.isDraggingOver=!1,this.isFileSelected=!1}onThumbnailUrlChange(){this.thumbnailUrl&&(this.isUploaded=!0)}connectedCallback(){this.onThumbnailUrlChange()}componentWillRender(){this.hasInstructions=!!this.element.querySelector('[slot="instructions"]'),this.hasSuccess=!!this.element.querySelector('[slot="success"]'),this.hasError=!!this.element.querySelector('[slot="error"]')}async removeFile(){this.hasFile&&!this.isUploading&&(this.isFileSelected=!1,this.isUploaded=!1,this.isUploading=!1,this.fileInput.value="",this.fileInput.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})),this.fileInput.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))}async selectFile(){this.hasFile||(this.isFileSelected=!1,this.fileInput.value="",this.fileInput.click())}onButtonClick(t){t.stopPropagation(),t.preventDefault(),this.isUploading||(this.hasFile?this.removeFile():this.selectFile())}onInput(t){this.isFileSelected=t.target.files&&t.target.files.length>0,this.isFileSelected?this.setThumnailDataUri(t.target.files[0]):this.thumbnailDataUri=null}setThumnailDataUri(t){if(this.thumbnailDataUri=null,!/\.(jpe?g|png|gif)$/i.test(t.name))return;const s=new FileReader;s.onload=()=>{this.thumbnailDataUri=s.result},s.readAsDataURL(t)}onDragOver(){this.isDraggingOver=!0}onDragLeave(){this.isDraggingOver=!1}get accept(){let t=[];return this.acceptImage&&t.push("image/*"),this.acceptPdf&&t.push(".pdf"),t.join(",")||null}get dropzoneWidth(){return this.width?this.width:this.avatar?"80px":"308px"}get dropzoneHeight(){return this.height?this.height:this.avatar?"80px":"auto"}get dropzoneClass(){let t="dropzone relative w-full h-full px-16 rounded-2xl overflow-hidden";return this.hasFile&&(t+=" opacity-0"),this.isDraggingOver&&(t+=" drag-over"),t+=this.showIcon&&this.showDropzoneText?" py-24":" py-16",t}get hasFile(){return this.isFileSelected||this.isUploaded}get thumbnailBackgroundImage(){let t=this.thumbnailUrl;return this.isFileSelected&&(t=this.thumbnailDataUri),t?`url(${t})`:null}get thumbnailBackgroundSize(){return["contain","cover","auto","stretch"].includes(this.thumbnailSize)?"stretch"===this.thumbnailSize?"100% 100%":this.thumbnailSize:"cover"}render(){let t;return t=this.icon?s("i",{"data-testid":"upload-icon",class:"dropzone-icon "+this.icon}):s("span",this.avatar?{"data-testid":"avatar-icon",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75ZM2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12Z" fill="currentColor"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 8.25C10.3431 8.25 9 9.59315 9 11.25C9 12.9069 10.3431 14.25 12 14.25C13.6569 14.25 15 12.9069 15 11.25C15 9.59315 13.6569 8.25 12 8.25ZM7.5 11.25C7.5 8.76472 9.51472 6.75 12 6.75C14.4853 6.75 16.5 8.76472 16.5 11.25C16.5 13.7353 14.4853 15.75 12 15.75C9.51472 15.75 7.5 13.7353 7.5 11.25Z" fill="currentColor"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 15.75C10.8922 15.75 9.80605 16.0565 8.86175 16.6357C7.91744 17.2148 7.15182 18.044 6.64962 19.0313C6.46183 19.4005 6.01031 19.5476 5.6411 19.3598C5.2719 19.172 5.12483 18.7205 5.31262 18.3513C5.94031 17.1172 6.89726 16.0809 8.07754 15.357C9.25782 14.6331 10.6154 14.25 11.9999 14.25C13.3845 14.25 14.7421 14.6331 15.9223 15.357C17.1026 16.0808 18.0596 17.1172 18.6873 18.3513C18.8751 18.7205 18.728 19.172 18.3588 19.3598C17.9896 19.5476 17.5381 19.4005 17.3503 19.0313C16.8481 18.0439 16.0824 17.2148 15.1381 16.6357C14.1938 16.0565 13.1077 15.75 11.9999 15.75Z" fill="currentColor"/>\n</svg>\n'}:{"data-testid":"image-icon",class:this.showDropzoneText?"mb-8":"",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19.5 21H4.5C3.67 21 3 20.33 3 19.5V4.5C3 3.67 3.67 3 4.5 3H19.5C20.33 3 21 3.67 21 4.5V19.5C21 20.33 20.33 21 19.5 21ZM4.5 4.5V19.5H19.5V4.5H4.5Z" fill="currentColor"/>\n  <path d="M3.74994 17.2498C3.55994 17.2498 3.36994 17.1798 3.21994 17.0298C2.92994 16.7398 2.92994 16.2598 3.21994 15.9698L6.43994 12.7498C6.99994 12.1898 7.99994 12.1898 8.55994 12.7498L10.4999 14.6898L14.6899 10.4998C15.2599 9.92977 16.2399 9.92977 16.8099 10.4998L20.7799 14.4698C21.0699 14.7598 21.0699 15.2398 20.7799 15.5298C20.4899 15.8198 20.0099 15.8198 19.7199 15.5298L15.7499 11.5598L11.5599 15.7498C10.9999 16.3098 9.99994 16.3098 9.43994 15.7498L7.49994 13.8098L4.27994 17.0298C4.12994 17.1798 3.93994 17.2498 3.74994 17.2498Z" fill="currentColor"/>\n  <path d="M9.37994 9.55994C9.89994 9.55994 10.3199 9.13994 10.3199 8.61994C10.3199 8.09994 9.88994 7.68994 9.37994 7.68994C8.86994 7.68994 8.43994 8.10994 8.43994 8.61994C8.43994 9.12994 8.85994 9.55994 9.37994 9.55994Z" fill="currentColor"/>\n</svg>\n'}),s(e,{class:"mx-image-upload inline-block",style:{width:this.dropzoneWidth}},s("div",{"data-testid":"dropzone-wrapper",class:"dropzone-wrapper flex w-full items-center justify-center relative rounded-2xl text-3 overflow-hidden",style:{height:this.dropzoneHeight}},s("div",{class:this.dropzoneClass},s("div",{class:"flex flex-col items-center justify-center w-full h-full"},this.showIcon&&t,s("slot",{name:"dropzone-text"},s("div",{"data-testid":"dropzone-text",class:"text-center"+(this.showDropzoneText&&!this.avatar?"":" hidden")},s("p",{class:"subtitle1 my-0"},"No ",this.assetName," to show"),s("p",{class:"text-4 my-0 mt-4"},"Click to add ",this.assetName)))),s("svg",{class:"dashed-border absolute inset-0 pointer-events-none",width:"100%",height:"100%"},s("rect",{width:"100%",height:"100%",fill:"none",rx:"16",ry:"16","stroke-width":"1","stroke-dasharray":"4,8"})),s("input",{ref:t=>this.fileInput=t,id:this.inputId,name:this.name,type:"file",accept:this.accept,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:this.onInput.bind(this),onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDragLeave.bind(this)})),this.hasFile&&this.thumbnailBackgroundImage&&s("div",{"data-testid":"thumbnail",class:"thumbnail absolute inset-0 bg-center bg-no-repeat",style:{backgroundImage:this.thumbnailBackgroundImage,backgroundSize:this.thumbnailBackgroundSize}}),s("div",{"data-testid":"uploaded",class:"flex items-center justify-center absolute inset-0"+(this.isUploaded?"":" hidden")},s("slot",{name:"uploaded"})),this.isUploading&&s("div",{"data-testid":"progress",class:"uploading-progress flex items-center justify-center opacity-50 absolute inset-0"},s("mx-circular-progress",{size:"2rem"}))),this.showButton&&s("mx-button",{"data-testid":"upload-button",class:"mt-16",btnType:this.hasFile&&!this.isUploading?"outlined":"contained",onClick:this.onButtonClick.bind(this),disabled:this.isUploading},this.hasFile&&!this.isUploading?this.removeButtonLabel:this.uploadButtonLabel),this.hasInstructions&&s("p",{class:"caption1 my-16"},s("slot",{name:"instructions"})),this.hasSuccess&&s("p",{class:"upload-success caption1 my-16"},s("slot",{name:"success"})),this.hasError&&s("p",{class:"upload-error caption1 my-16"},s("slot",{name:"error"})))}get element(){return i(this)}static get watchers(){return{thumbnailUrl:["onThumbnailUrlChange"]}}};export{h as mx_image_upload}