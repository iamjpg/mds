import{r as t,h as s,H as i,g as e,c as h}from"./p-0d0438ba.js";import{R as n,d as l}from"./p-ef89a8e1.js";import{a}from"./p-3a6987fb.js";import{M as r,m as o}from"./p-8a252c56.js";import{c}from"./p-2704e8d1.js";const d=class{constructor(s){t(this,s),this.value=null,this.appearDelay=0}connectedCallback(){this.appearDelay&&(this.element.classList.remove("block"),this.element.classList.add("hidden"),this.delayTimeout=setTimeout((()=>{this.element.classList.remove("hidden"),this.element.classList.add("block")}),this.appearDelay))}disconnectedCallback(){clearTimeout(this.delayTimeout)}get determinateBarStyle(){return{transform:`translateX(${this.value-100}%)`,transition:"transform 0.4s linear"}}render(){return s(i,{class:"mx-linear-progress block h-4 w-full rounded-sm overflow-hidden pointer-events-none",role:"progressbar","aria-valuenow":null!=this.value?Math.round(this.value):null,"aria-valuemin":null!=this.value?0:null,"aria-valuemax":null!=this.value?100:null},s("div",{class:"relative h-full"},null!=this.value?s("div",{"data-testid":"determinate",class:"fill h-4 absolute inset-0 rounded-sm",style:this.determinateBarStyle}):[s("div",{"data-testid":"indeterminate1",class:"indeterminate1 absolute h-full w-full"},s("div",{class:"fill absolute w-full h-full rounded-sm"})),s("div",{"data-testid":"indeterminate2",class:"indeterminate2 absolute h-full w-full"},s("div",{class:"fill absolute w-full h-full rounded-sm"}))]))}get element(){return e(this)}},m=class{constructor(s){t(this,s),this.mxPageChange=h(this,"mxPageChange",7),this.hasStatus=!1,this.page=0,this.rowsPerPageOptions=[10,25,50,100],this.rowsPerPage=100,this.simple=!1,this.disabled=!1,this.disableNextPage=!1,this.hideRowsPerPage=!1,this.moveStatusToBottom=!1,this.isXSmallMinWidth=!1,this.isSmallMinWidth=!1}componentWillRender(){this.hasStatus=!!this.element.querySelector('[slot="status"]')}componentDidLoad(){this.rowsMenu&&this.rowsMenuAnchor&&(this.rowsMenu.anchorEl=this.rowsMenuAnchor),this.resizeObserver=new n((()=>this.updateResponsiveElements())),this.resizeObserver.observe(this.element),requestAnimationFrame(this.updateResponsiveElements.bind(this))}updateResponsiveElements(){if(!this.paginationWrapper)return;let t=Array.from(this.paginationWrapper.children).reduce(((t,s)=>t+s.scrollWidth),0);this.hideRowsPerPage&&this.rowsPerPageWrapper&&(t+=this.rowsPerPageWrapper.scrollWidth);const s=t-this.element.offsetWidth;this.hideRowsPerPage=s>0,this.moveStatusToBottom=s>this.rowsPerPageWrapper.scrollWidth,this.isXSmallMinWidth=this.element.offsetWidth>=320,this.isSmallMinWidth=this.element.offsetWidth>=640}onClickFirstPage(){this.mxPageChange.emit({page:0,rowsPerPage:this.rowsPerPage})}onClickPreviousPage(){this.mxPageChange.emit({page:this.page-1,rowsPerPage:this.rowsPerPage})}onClickNextPage(){this.mxPageChange.emit({page:this.page+1,rowsPerPage:this.rowsPerPage})}onClickLastPage(){this.mxPageChange.emit({page:this.lastPage,rowsPerPage:this.rowsPerPage})}onChangeRowsPerPage(t){this.mxPageChange.emit({page:0,rowsPerPage:t})}get lastPage(){return 0===this.totalRows?0:null==this.totalRows?null:Math.ceil(this.totalRows/this.rowsPerPage)-1}get currentRange(){let t=this.rowsPerPage*this.page+1;return t+"–"+Math.min(this.totalRows,t+this.rowsPerPage-1)}get rowRangeClass(){let t="text-center flex-shrink min-w-0";return t+=this.isSmallMinWidth?" px-24":" px-16",this.isXSmallMinWidth||(t+=" whitespace-normal"),t}get paginationWrapperClass(){let t="flex relative";return this.moveStatusToBottom?t+=" flex-col-reverse items-end":(t+=" items-center",t+=this.hasStatus?" justify-between":" justify-end"),t}render(){return s(i,{class:"mx-pagination relative block text-4 whitespace-nowrap select-none"},!this.simple&&s("div",{class:"pagination-bg absolute top-0 left-0 w-full h-56 rounded-b-2xl"}),this.simple?s("div",{class:"simple flex items-center justify-center h-48"},s("mx-icon-button",{"aria-label":"Previous page","chevron-left":!0,disabled:0===this.page||this.disabled,onClick:this.onClickPreviousPage.bind(this)}),null!==this.lastPage?this.page+1+" of "+(this.lastPage+1):"",s("mx-icon-button",{"aria-label":"Next page","chevron-right":!0,disabled:this.page===this.lastPage||this.disabled||this.disableNextPage,onClick:this.onClickNextPage.bind(this)})):s("div",{ref:t=>this.paginationWrapper=t,class:this.paginationWrapperClass},this.hasStatus&&s("div",{"data-testid":"status",class:"px-24 py-10 flex relative items-center justify-self-start"},s("slot",{name:"status"})),s("div",{class:"flex flex-grow-0 items-center justify-end h-56 pr-4"+(this.hideRowsPerPage?" relative":"")},this.rowsPerPageOptions&&this.rowsPerPageOptions.length>1&&s("div",{ref:t=>this.rowsPerPageWrapper=t,"aria-hidden":this.hideRowsPerPage,class:"flex items-center px-24"+(this.hideRowsPerPage?" absolute opacity-0 pointer-events-none":"")},"Rows per page:  ",s("div",{"data-testid":"rows-per-page",ref:t=>this.rowsMenuAnchor=t,class:"flex items-center cursor-pointer"},this.rowsPerPage,s("span",{class:"ml-12",innerHTML:a})),s("mx-menu",{ref:t=>this.rowsMenu=t},this.rowsPerPageOptions.map((t=>s("mx-menu-item",{disabled:this.disabled,onClick:this.onChangeRowsPerPage.bind(this,t)},t))))),this.totalRows>0&&s("div",{"data-testid":"row-range",class:this.rowRangeClass},this.currentRange," of ",this.totalRows),s("div",{class:"flex items-center sm:space-x-8"},s("mx-icon-button",{"aria-label":"First page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M18.41 16.59L13.82 12L18.41 7.41L17 6L11 12L17 18L18.41 16.59ZM6 6H8V18H6V6Z" fill="currentColor" />\n</svg>\n',disabled:0===this.page||this.disabled,onClick:this.onClickFirstPage.bind(this)}),s("mx-icon-button",{"aria-label":"Previous page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 7.41L10.42 12L15 16.59L13.59 18L7.59 12L13.59 6L15 7.41Z" fill="currentColor"/>\n</svg>\n',disabled:0===this.page||this.disabled,onClick:this.onClickPreviousPage.bind(this)}),s("mx-icon-button",{"aria-label":"Next page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8.58997 16.59L13.17 12L8.58997 7.41L9.99997 6L16 12L9.99997 18L8.58997 16.59Z" fill="currentColor"/>\n</svg>\n',disabled:this.page===this.lastPage||this.disabled||this.disableNextPage,onClick:this.onClickNextPage.bind(this)}),null!==this.lastPage&&s("mx-icon-button",{"aria-label":"Last page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.58997 7.41L10.18 12L5.58997 16.59L6.99997 18L13 12L6.99997 6L5.58997 7.41ZM16 6H18V18H16V6Z" fill="currentColor"/>\n</svg>\n',disabled:this.page===this.lastPage||this.disabled,onClick:this.onClickLastPage.bind(this)})))))}get element(){return e(this)}},u=class{constructor(s){t(this,s),this.isExposedMobileColumn=!0,this.minWidths=new r}connectedCallback(){o.subscribeComponent(this)}disconnectedCallback(){o.unsubscribeComponent(this)}get cellClass(){let t="mx-table-cell flex items-center text-4";return!this.minWidths.sm&&this.isExposedMobileColumn?t+=" row-start-1 exposed-cell":this.minWidths.sm||(t+=" py-0 pb-12 col-span-3"),t}render(){return s(i,{role:"gridcell","aria-describedby":`column-header-${this.columnIndex}`,class:this.cellClass},s("div",{class:"min-h-20 max-w-full break-words"},!this.minWidths.sm&&!this.isExposedMobileColumn&&null!=this.heading&&s("p",{class:"subtitle5 my-0 mb-4",innerHTML:this.heading}),s("slot",null)))}get element(){return e(this)}},p=class{constructor(s){t(this,s),this.mxCheck=h(this,"mxCheck",7),this.actions=[],this.checked=!1,this.minWidths=new r,this.checkable=!1,this.checkOnRowClick=!1,this.isMobileExpanded=!1,this.isMobileCollapsing=!1}connectedCallback(){if(o.subscribeComponent(this),this.actions.some((t=>!t.value)))throw new Error("Table row actions must have a value property!")}componentWillRender(){this.minWidths.sm||this.isMobileExpanded||(this.element.style.maxHeight=this.getCollapsedHeight());const t=this.element.closest("mx-table");if(this.checkable=t&&t.checkable,this.checkable&&null==this.rowId)throw new Error("Checkable rows require either a getRowId prop on the table, or a rowId on the row!");this.checkable&&(this.checkOnRowClick=t.checkOnRowClick)}componentDidRender(){this.actions.length>1&&this.actionMenu&&this.actionMenuButton&&(this.actionMenu.anchorEl=this.actionMenuButton)}disconnectedCallback(){o.unsubscribeComponent(this)}onClick(t){if(!t.target.closest("button, input, mx-menu"))if(this.minWidths.sm)this.checkable&&this.checkOnRowClick&&(this.checked=!this.checked,this.mxCheck.emit({rowId:this.rowId,checked:this.checked}));else{const s=this.getExposedCell();if(!s)return;t.target.closest("mx-table-cell")===s&&this.accordion()}}accordion(){this.minWidths.sm||(this.isMobileExpanded?this.collapse():this.expand())}async collapse(){this.isMobileExpanded&&(this.isMobileCollapsing=!0,this.element.style.maxHeight=this.element.scrollHeight+"px",requestAnimationFrame((()=>{this.element.style.maxHeight=this.getCollapsedHeight()})))}async expand(){this.isMobileExpanded||(this.element.style.maxHeight=this.element.scrollHeight+"px",this.isMobileExpanded=!0,requestAnimationFrame((()=>{this.element.style.maxHeight=this.element.scrollHeight+"px"})))}onTransitionEnd(){this.isMobileCollapsing&&(this.isMobileExpanded=!1,this.isMobileCollapsing=!1),this.element.style.maxHeight=""}onCheckboxInput(t){this.mxCheck.emit({rowId:this.rowId,checked:t.target.checked})}getExposedCell(){return(Array.from(this.element.querySelectorAll("mx-table-cell"))||[]).find((t=>t.isExposedMobileColumn))}getCollapsedHeight(){const t=this.getExposedCell();return t?t.offsetHeight+1+"px":"calc(3.25rem + 1px)"}get rowClass(){let t="mx-table-row";return t+=this.minWidths.sm?" contents":" grid overflow-hidden",this.checkable&&(t+=" checkable-row"),this.checkable&&this.checkOnRowClick&&(t+=" cursor-pointer"),this.minWidths.sm||this.isMobileExpanded||(t+=" mobile-collapsed"),t}get rowStyle(){return this.minWidths.sm?{}:{gridTemplateColumns:"minmax(0, min-content) minmax(0, auto) minmax(0, min-content)",maxHeight:""}}render(){return s(i,{role:"row",class:this.rowClass,style:this.rowStyle,onClick:this.onClick.bind(this),onTransitionEnd:this.onTransitionEnd.bind(this)},this.checkable&&s("div",{class:"flex items-center pr-4 col-start-1 row-start-1 sm:row-start-auto sm:col-start-auto",onClick:this.accordion.bind(this)},s("mx-checkbox",{ref:t=>this.checkbox=t,checked:this.checked,onInput:this.onCheckboxInput.bind(this),onClick:t=>t.stopPropagation(),"label-name":"Select row","hide-label":!0})),s("slot",null),!this.checkable&&!this.minWidths.sm&&s("div",{class:"row-start-1 col-start-1 w-0"}),!this.minWidths.sm&&s("div",{class:"flex items-center justify-end px-16 row-start-1",onClick:this.accordion.bind(this)},s("span",{class:"mobile-row-chevron text-1 transform"+(this.isMobileExpanded&&!this.isMobileCollapsing?" rotate-180":""),innerHTML:c})),1===this.actions.length&&s("div",{class:"action-cell flex items-center p-16 sm:p-0 justify-end col-span-3 sm:col-span-1"},s("mx-button",Object.assign({"data-testid":"action-button","btn-type":"text"},this.actions[0]),this.actions[0].value)),this.actions.length>1&&s("div",{class:"action-cell flex items-center p-0 justify-end col-span-3 sm:col-span-1"},s("mx-icon-button",{ref:t=>this.actionMenuButton=t,innerHTML:l}),s("mx-menu",{"data-testid":"action-menu",ref:t=>this.actionMenu=t},this.actions.map((t=>s("mx-menu-item",Object.assign({},t),t.value))))))}get element(){return e(this)}};export{d as mx_linear_progress,m as mx_pagination,u as mx_table_cell,p as mx_table_row}