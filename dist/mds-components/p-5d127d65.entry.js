import{r as t,h as s,H as i,g as e,c as n}from"./p-70d5d065.js";import{R as h,d as r}from"./p-ef89a8e1.js";import{a}from"./p-3a6987fb.js";import{M as l,m as o}from"./p-8a252c56.js";import{c}from"./p-2704e8d1.js";import{d,e as u,a as m,g as p,f as w}from"./p-0d6b3f5b.js";import{c as f,e as g}from"./p-2bd2025a.js";const x=class{constructor(s){t(this,s),this.value=null,this.appearDelay=0}connectedCallback(){this.appearDelay&&(this.element.classList.remove("block"),this.element.classList.add("hidden"),this.delayTimeout=setTimeout((()=>{this.element.classList.remove("hidden"),this.element.classList.add("block")}),this.appearDelay))}disconnectedCallback(){clearTimeout(this.delayTimeout)}get determinateBarStyle(){return{transform:`translateX(${this.value-100}%)`,transition:"transform 0.4s linear"}}render(){return s(i,{class:"mx-linear-progress block h-4 w-full rounded-sm overflow-hidden pointer-events-none",role:"progressbar","aria-valuenow":null!=this.value?Math.round(this.value):null,"aria-valuemin":null!=this.value?0:null,"aria-valuemax":null!=this.value?100:null},s("div",{class:"relative h-full"},null!=this.value?s("div",{"data-testid":"determinate",class:"fill h-4 absolute inset-0 rounded-sm",style:this.determinateBarStyle}):[s("div",{"data-testid":"indeterminate1",class:"indeterminate1 absolute h-full w-full"},s("div",{class:"fill absolute w-full h-full rounded-sm"})),s("div",{"data-testid":"indeterminate2",class:"indeterminate2 absolute h-full w-full"},s("div",{class:"fill absolute w-full h-full rounded-sm"}))]))}get element(){return e(this)}},v=class{constructor(s){t(this,s),this.mxPageChange=n(this,"mxPageChange",7),this.hasStatus=!1,this.page=1,this.rowsPerPageOptions=[10,25,50,100],this.rowsPerPage=100,this.simple=!1,this.disabled=!1,this.disableNextPage=!1,this.hideRowsPerPage=!1,this.moveStatusToBottom=!1,this.isXSmallMinWidth=!1,this.isSmallMinWidth=!1}componentWillRender(){this.hasStatus=!!this.element.querySelector('[slot="status"]')}componentDidLoad(){this.rowsMenu&&this.rowsMenuAnchor&&(this.rowsMenu.anchorEl=this.rowsMenuAnchor),this.resizeObserver=new h((()=>this.updateResponsiveElements())),this.resizeObserver.observe(this.element),requestAnimationFrame(this.updateResponsiveElements.bind(this))}updateResponsiveElements(){if(!this.paginationWrapper)return;let t=Array.from(this.paginationWrapper.children).reduce(((t,s)=>t+s.scrollWidth),0);this.hideRowsPerPage&&this.rowsPerPageWrapper&&(t+=this.rowsPerPageWrapper.scrollWidth);const s=t-this.element.offsetWidth;this.hideRowsPerPage=s>0,this.moveStatusToBottom=s>this.rowsPerPageWrapper.scrollWidth,this.isXSmallMinWidth=this.element.offsetWidth>=320,this.isSmallMinWidth=this.element.offsetWidth>=640}onClickFirstPage(){this.mxPageChange.emit({page:1,rowsPerPage:this.rowsPerPage})}onClickPreviousPage(){this.mxPageChange.emit({page:this.page-1,rowsPerPage:this.rowsPerPage})}onClickNextPage(){this.mxPageChange.emit({page:this.page+1,rowsPerPage:this.rowsPerPage})}onClickLastPage(){this.mxPageChange.emit({page:this.lastPage,rowsPerPage:this.rowsPerPage})}onChangeRowsPerPage(t){this.mxPageChange.emit({page:1,rowsPerPage:t})}get lastPage(){return 0===this.totalRows?1:null==this.totalRows?null:Math.ceil(this.totalRows/this.rowsPerPage)}get currentRange(){let t=this.rowsPerPage*(this.page-1)+1;return t+"–"+Math.min(this.totalRows,t+this.rowsPerPage-1)}get rowRangeClass(){let t="text-center flex-shrink min-w-0";return t+=this.isSmallMinWidth?" px-24":" px-16",this.isXSmallMinWidth||(t+=" whitespace-normal"),t}get paginationWrapperClass(){let t="flex relative";return this.moveStatusToBottom?t+=" flex-col-reverse items-end":(t+=" items-center",t+=this.hasStatus?" justify-between":" justify-end"),t}render(){return s(i,{class:"mx-pagination relative block text-4 whitespace-nowrap select-none"},!this.simple&&s("div",{class:"pagination-bg absolute top-0 left-0 w-full h-56 rounded-b-2xl"}),this.simple?s("div",{class:"simple flex items-center justify-center h-48"},s("mx-icon-button",{"aria-label":"Previous page","chevron-left":!0,disabled:1===this.page||this.disabled,onClick:this.onClickPreviousPage.bind(this)}),null!==this.lastPage?this.page+" of "+this.lastPage:"",s("mx-icon-button",{"aria-label":"Next page","chevron-right":!0,disabled:this.page===this.lastPage||this.disabled||this.disableNextPage,onClick:this.onClickNextPage.bind(this)})):s("div",{ref:t=>this.paginationWrapper=t,class:this.paginationWrapperClass},this.hasStatus&&s("div",{"data-testid":"status",class:"px-24 py-10 flex relative items-center justify-self-start"},s("slot",{name:"status"})),s("div",{class:"flex flex-grow-0 items-center justify-end h-56 pr-4"+(this.hideRowsPerPage?" relative":"")},this.rowsPerPageOptions&&this.rowsPerPageOptions.length>1&&s("div",{ref:t=>this.rowsPerPageWrapper=t,"aria-hidden":this.hideRowsPerPage,class:"flex items-center px-24"+(this.hideRowsPerPage?" absolute opacity-0 pointer-events-none":"")},"Rows per page:  ",s("div",{"data-testid":"rows-per-page",ref:t=>this.rowsMenuAnchor=t,class:"flex items-center cursor-pointer"},this.rowsPerPage,s("span",{class:"ml-12",innerHTML:a})),s("mx-menu",{ref:t=>this.rowsMenu=t},this.rowsPerPageOptions.map((t=>s("mx-menu-item",{disabled:this.disabled,onClick:this.onChangeRowsPerPage.bind(this,t)},t))))),this.totalRows>0&&s("div",{"data-testid":"row-range",class:this.rowRangeClass},this.currentRange," of ",this.totalRows),s("div",{class:"flex items-center sm:space-x-8"},s("mx-icon-button",{"aria-label":"First page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M18.41 16.59L13.82 12L18.41 7.41L17 6L11 12L17 18L18.41 16.59ZM6 6H8V18H6V6Z" fill="currentColor" />\n</svg>\n',disabled:1===this.page||this.disabled,onClick:this.onClickFirstPage.bind(this)}),s("mx-icon-button",{"aria-label":"Previous page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 7.41L10.42 12L15 16.59L13.59 18L7.59 12L13.59 6L15 7.41Z" fill="currentColor"/>\n</svg>\n',disabled:1===this.page||this.disabled,onClick:this.onClickPreviousPage.bind(this)}),s("mx-icon-button",{"aria-label":"Next page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8.58997 16.59L13.17 12L8.58997 7.41L9.99997 6L16 12L9.99997 18L8.58997 16.59Z" fill="currentColor"/>\n</svg>\n',disabled:this.page===this.lastPage||this.disabled||this.disableNextPage,onClick:this.onClickNextPage.bind(this)}),null!==this.lastPage&&s("mx-icon-button",{"aria-label":"Last page",innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.58997 7.41L10.18 12L5.58997 16.59L6.99997 18L13 12L6.99997 6L5.58997 7.41ZM16 6H18V18H16V6Z" fill="currentColor"/>\n</svg>\n',disabled:this.page===this.lastPage||this.disabled,onClick:this.onClickLastPage.bind(this)})))))}get element(){return e(this)}},C=class{constructor(s){t(this,s),this.isExposedMobileColumn=!0,this.minWidths=new l}connectedCallback(){o.subscribeComponent(this)}disconnectedCallback(){o.unsubscribeComponent(this)}get cellClass(){let t="mx-table-cell flex flex-1 items-center overflow-hidden";return!this.minWidths.sm&&this.isExposedMobileColumn?t+=" row-start-1 exposed-cell":this.minWidths.sm||(t+=" py-0 pb-12 col-start-2 col-span-4"),t}render(){return s(i,{role:"gridcell","aria-describedby":null!=this.columnIndex?`column-header-${this.columnIndex}`:null,class:this.cellClass},s("div",{class:"min-h-16 max-w-full break-words",role:null==this.columnIndex?"heading":null},!this.minWidths.sm&&!this.isExposedMobileColumn&&null!=this.heading&&s("p",{class:"subtitle5 my-0 mb-4",innerHTML:this.heading}),s("slot",null)))}get element(){return e(this)}};class b{constructor(t){this.scrollingContainer=d(t)}update(t){clearInterval(this.interval);const{clientX:s,clientY:i}=m(t),e=u(this.scrollingContainer);i>=e.top&&i<=e.bottom&&s>=e.left&&s<=e.right||(this.interval=setInterval(window.scrollBy,5,5*(s<e.left?-1:1),5*(i<e.top?-1:1)))}stop(){clearInterval(this.interval)}}const y=class{constructor(s){t(this,s),this.mxCheck=n(this,"mxCheck",7),this.mxRowDragStart=n(this,"mxRowDragStart",7),this.mxRowDragEnd=n(this,"mxRowDragEnd",7),this.mxDragKeyDown=n(this,"mxDragKeyDown",7),this.dragOrigin={x:0,y:0},this.indentLevel=0,this.columnCount=1,this.actions=[],this.checked=!1,this.subheader=!1,this.minWidths=new l,this.checkable=!1,this.checkOnRowClick=!1,this.isDraggable=!1,this.isDragging=!1,this.isMobileExpanded=!1,this.isMobileCollapsing=!1}async translateRow(t,s){const i=`translate3d(${t}px, ${s}px, 0)`;this.dragShadowEl&&(this.dragShadowEl.style.transform=i),(await this.getChildren()).forEach((t=>t.style.transform=i))}connectedCallback(){if(o.subscribeComponent(this),this.actions.some((t=>!t.value)))throw new Error("Table row actions must have a value property!");this.setIndentLevel()}componentWillRender(){const t=this.element.closest("mx-table");if(this.checkable=t&&t.checkable,this.isDraggable=t&&t.draggableRows,this.columnCount=(t&&t.columns.length)+(this.actions.length?1:0),this.checkable&&null==this.rowId)throw new Error("Checkable rows require either a getRowId prop on the table, or a rowId on the row!");this.checkable&&(this.checkOnRowClick=t.checkOnRowClick)}componentDidRender(){this.actions.length>1&&this.actionMenu&&this.actionMenuButton&&(this.actionMenu.anchorEl=this.actionMenuButton),this.wrapFirstColumn(),this.moveNestedRows(),this.minWidths.sm||this.isMobileExpanded||(this.rowEl.style.maxHeight=this.getCollapsedHeight())}disconnectedCallback(){o.unsubscribeComponent(this)}setIndentLevel(){let t=this.element.parentElement.closest("mx-table-row");for(this.indentLevel=0;t;)t.subheader||this.indentLevel++,t=t.parentElement.closest("mx-table-row")}wrapFirstColumn(){const t=this.element.querySelector("mx-table-cell");this.firstColumnWrapper&&t&&this.firstColumnWrapper.appendChild(t)}moveNestedRows(){Array.from(this.rowEl.children).filter((t=>"MX-TABLE-ROW"===t.tagName)).forEach((t=>this.childRowWrapper.appendChild(t)))}onClick(t){if(!t.target.closest("a, button, input, mx-menu"))if(this.minWidths.sm)this.checkable&&this.checkOnRowClick&&(this.checked=!this.checked,this.mxCheck.emit({rowId:this.rowId,checked:this.checked}));else{const s=this.getExposedCell();if(!s||this.subheader||this.columnCount<2)return;t.target.closest("mx-table-cell")===s&&this.accordion()}}onMouseOver(t){t.stopPropagation(),t.buttons>0||this.rowEl.classList.add("hovered-row")}onMouseOut(t){t.stopPropagation(),this.rowEl.classList.remove("hovered-row")}onKeyboardHandleKeyDown(t){!this.isDragging&&[" ","Enter"].includes(t.key)&&this.startDragging(t)}async startDragging(t){if(t.stopPropagation(),t.preventDefault(),this.isDragging=!0,"keydown"!==t.type){const{pageX:s,pageY:i}=m(t);this.dragOrigin.x=s,this.dragOrigin.y=i}else{const{top:t,left:s}=p(this.rowEl.children[0]);this.dragOrigin.x=s,this.dragOrigin.y=t}this.rowEl.classList.add("pointer-events-none"),this.createDragShadowEl();const s=await this.getChildren();for(let t=0;t<s.length;t++)s[t].style.zIndex="9999";this.addDragListeners(t),this.mxRowDragStart.emit({isKeyboard:"keydown"===t.type})}addDragListeners(t){const s=t=>{requestAnimationFrame((()=>{if(!this.isDragging)return;const{pageX:s,pageY:i}=m(t);this.translateRow(s-this.dragOrigin.x,i-this.dragOrigin.y),this.dragScroller&&this.dragScroller.update(t)}))},i=t=>{t.stopPropagation(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i),document.removeEventListener("touchcancel",i),this.dragScroller.stop(),this.dragScroller=null,this.stopDragging("touchcancel"===t.type)},e=t=>{if([" ","Enter"].includes(t.key))document.removeEventListener("keydown",e),this.stopDragging(!0);else if(["Escape","Tab"].includes(t.key))document.removeEventListener("keydown",e),this.stopDragging(!0,!0);else{if(!t.key.includes("Arrow"))return;this.mxDragKeyDown.emit(t.key)}t.stopPropagation(),t.preventDefault()};"keydown"===t.type?document.addEventListener("keydown",e):"touchstart"===t.type?(this.dragScroller=new b(this.rowEl),document.addEventListener("touchmove",s),document.addEventListener("touchend",i),document.addEventListener("touchcancel",i)):(this.dragScroller=new b(this.rowEl),document.addEventListener("mousemove",s),document.addEventListener("mouseup",i))}async stopDragging(t=!1,s=!1){this.isDragging=!1,this.rowEl.classList.remove("drag-row","pointer-events-none"),this.dragShadowEl&&this.dragShadowEl.remove(),this.dragShadowEl=void 0;const i=await this.getChildren();for(let t=0;t<i.length;t++){const s=i[t];s.style.transform="",s.style.zIndex=""}this.mxRowDragEnd.emit({isKeyboard:t,isCancel:s})}async createDragShadowEl(){this.dragShadowEl=document.createElement("div"),this.dragShadowEl.classList.add("absolute","w-full","shadow-24"),this.dragShadowEl.style.zIndex="9998",this.dragShadowEl.style.height=await this.getHeight()+"px";const t=(await this.getChildren())[0];this.dragShadowEl.style.top=t.offsetTop+"px",this.dragShadowEl.style.left=t.offsetLeft+"px",this.element.parentNode.insertBefore(this.dragShadowEl,this.element)}accordion(){this.minWidths.sm||(this.isMobileExpanded?this.collapse():this.expand())}async collapse(t=!1){this.isMobileExpanded&&(this.isMobileCollapsing=!0,t||await f(this.rowEl,150,this.getCollapsedHeight()),this.isMobileExpanded=!1,this.isMobileCollapsing=!1)}async expand(){this.isMobileExpanded||(this.isMobileExpanded=!0,await new Promise(requestAnimationFrame),g(this.rowEl))}async focusDragHandle(){this.keyboardDragHandle&&this.keyboardDragHandle.focus()}async getChildren(){let t=[];this.minWidths.sm?Array.from(this.rowEl.children).forEach((s=>{s.offsetParent?t.push(s):t.push(...Array.from(s.children))})):t.push(this.rowEl);const s=Array.from(this.childRowWrapper.children);return await Promise.all(s.map((s=>s.getChildren().then((s=>t.push(...s)))))),t}async getNestedRowIndexes(){return Array.from(this.childRowWrapper.children).map((t=>t.rowIndex)).filter((t=>null!=t))}async getHeight(){let t=(await this.getChildren())[0].offsetHeight;const s=Array.from(this.childRowWrapper.children);return await Promise.all(s.map((s=>s.getHeight().then((s=>t+=s))))),t}onTransitionEnd(t){t.target===this.rowEl.children[0]&&w(this.rowEl.children[0])&&this.rowEl.children[0].scrollIntoView()}onCheckboxInput(t){this.mxCheck.emit({rowId:this.rowId,checked:t.target.checked})}getExposedCell(){return(Array.from(this.element.querySelectorAll("mx-table-cell"))||[]).find((t=>t.isExposedMobileColumn))}getCollapsedHeight(){const t=this.getExposedCell();return t&&t.offsetHeight?t.offsetHeight+1+"px":"calc(3.25rem + 1px)"}get rowEl(){return this.element.firstElementChild}get rowClass(){let t="table-row overflow-hidden";return t+=this.minWidths.sm?" contents":" grid",this.checkable&&(t+=" checkable-row"),this.checkable&&this.checkOnRowClick&&(t+=" cursor-pointer"),this.minWidths.sm||this.isMobileExpanded||(t+=" mobile-collapsed"),this.subheader&&(t+=" subheader overline2"),t}get rowStyle(){if(this.minWidths.sm)return{};let t=this.indentLevel>0?"minmax(0, min-content)":"0";return t+=this.checkable?" minmax(0, min-content)":" 0",t+=this.isDraggable?" minmax(0, min-content)":" 0",t+=" minmax(0, auto) minmax(0, min-content)",{gridTemplateColumns:t,maxHeight:""}}get indentClass(){let t="table-row-indent h-full";return this.minWidths.sm?t:(t+=" col-start-1 row-start-1",t+" row-span-"+this.columnCount)}get indentStyle(){return{width:2*this.indentLevel+"rem",minWidth:this.indentLevel+"rem"}}render(){return s(i,{class:"mx-table-row contents"},s("div",{role:"row",class:this.rowClass,style:this.rowStyle,onClick:this.onClick.bind(this),onTransitionEnd:this.onTransitionEnd.bind(this),onMouseOver:this.onMouseOver.bind(this),onMouseOut:this.onMouseOut.bind(this)},s("div",{ref:t=>this.firstColumnWrapper=t,class:"first-column-wrapper contents sm:flex sm:items-center min-w-0 overflow-hidden"+(this.subheader?" sm:col-span-full":"")},s("div",{class:this.indentClass,style:this.indentStyle,"data-testid":"indent-"+this.indentLevel}),this.checkable&&s("div",{class:"flex items-center pr-4 col-start-2 row-start-1 sm:row-start-auto sm:col-start-auto",onClick:this.accordion.bind(this)},s("mx-checkbox",{ref:t=>this.checkbox=t,checked:this.checked,onInput:this.onCheckboxInput.bind(this),onClick:t=>t.stopPropagation(),"label-name":"Select row","hide-label":!0})),this.isDraggable&&s("div",{class:"drag-handle flex items-center col-start-3 row-start-1 sm:row-start-auto sm:col-start-auto cursor-move","data-testid":"drag-handle",onMouseDown:this.startDragging.bind(this),onTouchStart:this.startDragging.bind(this)},s("span",{"aria-label":"Press Space or Enter to move this row",ref:t=>this.keyboardDragHandle=t,tabindex:"0",class:"pointer-events-none"+(this.checkable?" mx-8":""),innerHTML:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14 13C14.5523 13 15 12.5523 15 12C15 11.4477 14.5523 11 14 11C13.4477 11 13 11.4477 13 12C13 12.5523 13.4477 13 14 13Z" fill="currentColor"/>\n  <path d="M14 5C14.5523 5 15 4.55228 15 4C15 3.44772 14.5523 3 14 3C13.4477 3 13 3.44772 13 4C13 4.55228 13.4477 5 14 5Z" fill="currentColor"/>\n  <path d="M14 21C14.5523 21 15 20.5523 15 20C15 19.4477 14.5523 19 14 19C13.4477 19 13 19.4477 13 20C13 20.5523 13.4477 21 14 21Z" fill="currentColor"/>\n  <path d="M10 13C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11C9.44772 11 9 11.4477 9 12C9 12.5523 9.44772 13 10 13Z" fill="currentColor"/>\n  <path d="M10 5C10.5523 5 11 4.55228 11 4C11 3.44772 10.5523 3 10 3C9.44772 3 9 3.44772 9 4C9 4.55228 9.44772 5 10 5Z" fill="currentColor"/>\n  <path d="M14 9C14.5523 9 15 8.55228 15 8C15 7.44772 14.5523 7 14 7C13.4477 7 13 7.44772 13 8C13 8.55228 13.4477 9 14 9Z" fill="currentColor"/>\n  <path d="M14 17C14.5523 17 15 16.5523 15 16C15 15.4477 14.5523 15 14 15C13.4477 15 13 15.4477 13 16C13 16.5523 13.4477 17 14 17Z" fill="currentColor"/>\n  <path d="M10 9C10.5523 9 11 8.55228 11 8C11 7.44772 10.5523 7 10 7C9.44772 7 9 7.44772 9 8C9 8.55228 9.44772 9 10 9Z" fill="currentColor"/>\n  <path d="M10 17C10.5523 17 11 16.5523 11 16C11 15.4477 10.5523 15 10 15C9.44772 15 9 15.4477 9 16C9 16.5523 9.44772 17 10 17Z" fill="currentColor"/>\n  <path d="M10 21C10.5523 21 11 20.5523 11 20C11 19.4477 10.5523 19 10 19C9.44772 19 9 19.4477 9 20C9 20.5523 9.44772 21 10 21Z" fill="currentColor"/>\n</svg>\n',onKeyDown:this.onKeyboardHandleKeyDown.bind(this)}),this.isDragging&&s("p",{class:"sr-only",role:"alert"},"Use the arrow keys to move the row up and down. Press Space or Enter to accept. Press Escape to cancel."))),s("slot",null),!this.checkable&&!this.minWidths.sm&&s("div",{class:"row-start-1 col-start-2 w-0"}),!this.isDraggable&&!this.minWidths.sm&&s("div",{class:"row-start-1 col-start-3 w-0"}),!this.minWidths.sm&&!this.subheader&&this.columnCount>1&&s("button",{class:"flex border-0 items-center justify-end px-16 row-start-1","aria-hidden":"true",onClick:this.accordion.bind(this),onMouseDown:t=>t.preventDefault()},s("span",{class:"mobile-row-chevron text-1 transform"+(this.isMobileExpanded&&!this.isMobileCollapsing?" rotate-180":""),innerHTML:c})),1===this.actions.length&&s("div",{class:"action-cell flex items-center p-16 sm:p-0 justify-end col-start-2 col-span-4 sm:col-span-1"},s("mx-button",Object.assign({"data-testid":"action-button","btn-type":"text"},this.actions[0]),this.actions[0].value)),this.actions.length>1&&s("div",{class:"action-cell flex items-center p-0 justify-end col-start-2 col-span-4 sm:col-span-1"},s("mx-icon-button",{ref:t=>this.actionMenuButton=t,innerHTML:r}),s("mx-menu",{"data-testid":"action-menu",ref:t=>this.actionMenu=t},this.actions.map((t=>s("mx-menu-item",Object.assign({},t),t.value)))))),s("div",{ref:t=>this.childRowWrapper=t,class:"contents"}))}get element(){return e(this)}};export{x as mx_linear_progress,v as mx_pagination,C as mx_table_cell,y as mx_table_row}